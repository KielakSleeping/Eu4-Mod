namespace = kielak_events

country_event = {
	id = kielak_events.1
	title = kielak_events.1.t
	picture = HRE_eventPicture
	desc = kielak_events.1.d

	trigger = {
		AND = {
			tag = HAB
			HAB  = {
				is_emperor = yes
				NOT = {is_year = 1470 }
				NOT = {
					has_country_modifier = emperor_dec_elector
				}
				OR = {
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = BRA
						}
						BRA = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = ROT
						}
						ROT = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = VEN
						}
						VEN = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = MLO
						}
						MLO = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = HES
						}
						HES = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = HSA
						}
						HSA = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = SIC
						}
						SIC = {ai = no}
					}
				}
				
			}
		}

	}
	mean_time_to_happen = {
		months = 4
	}

	option = {
		name = kielak_events.1.a
		add_country_modifier = {
			name = emperor_dec_elector
			duration = 3600
		}
	}

}

country_event = { #Ethiopia Jewish Path Event at game start
	id = kielak_events.2
	title = kielak_events.2.t
	picture = RELIGION_eventPicture
	desc = kielak_events.2.d

	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = kielak_events.2.a
		change_religion = jewish
		every_owned_province = {
			change_religion = jewish
		}
	}

	option = {
		name = kielak_events.2.b
	}

}

country_event = { #Ethiopia form Israel instead of Aksum if Jewish
	id = kielak_events.3
	title = kielak_events.3.t
	picture = RELIGION_eventPicture
	desc = kielak_events.3.d

	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = kielak_events.3.a
		change_tag = ISR
		on_change_tag_effect = yes
		remove_non_electors_emperors_from_empire_effect = yes
		set_capital = 379
		add_prestige = 25
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = ISR_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		set_country_flag = formed_israel_flag
	}

}

country_event = { #China Slots choose harmonized religion
	id = kielak_events.4
	title = kielak_events.4.t
	picture = RELIGION_eventPicture
	desc = kielak_events.4.d

	is_triggered_only = yes

	option = {
		name = kielak_events.4.a
		trigger = {
			NOT = { has_harmonized_with = shinto }
		}
		add_harmonized_religion = shinto
	}


	option = {
		name = kielak_events.4.b
		trigger = {
			NOT = { has_harmonized_with = pagan }
		}
		add_harmonized_religion = animism
	}

	option = {
		name = kielak_events.4.c
		trigger = {
			NOT = { has_harmonized_with = muslim }
		}
		add_harmonized_religion = sunni
	}
	option = {
		name = kielak_events.4.dd
		trigger = {
			NOT = { has_harmonized_with = dharmic }
		}
		add_harmonized_religion = hinduism
	}

	option = {
		name = kielak_events.4.e
		trigger = {
			NOT = { has_harmonized_with = christian }
		}
		add_harmonized_religion = catholic
	}
	option = {
		name = kielak_events.4.f
		trigger = {
			NOT = { has_harmonized_with = mahayana }
		}
		add_harmonized_religion = mahayana
	}
	option = {
		name = kielak_events.4.g
		trigger = {
			NOT = { has_harmonized_with = buddhism }
		}
		add_harmonized_religion = buddhism
	}
	option = {
		name = kielak_events.4.h
		trigger = {
			NOT = { has_harmonized_with = vajrayana }
		}
		add_harmonized_religion = vajrayana
	}
	option = {
		name = kielak_events.4.i
		trigger = {
			NOT = { has_harmonized_with = zoroastrian_group }
		}
		add_harmonized_religion = zoroastrian
	}

	option = {
		name = kielak_events.4.j
		trigger = {
			NOT = { has_harmonized_with = jewish_group }
		}
		add_harmonized_religion = jewish
	}


	option = {
		name = kielak_events.4.k
		add_prestige = 1
	}
	

}


country_event = { #Ming annex day 1 to destroy mandate event
	id = kielak_events.5
	title = kielak_events.5.t
	picture = RELIGION_eventPicture
	desc = kielak_events.5.d

	is_triggered_only = yes

	option = {
		inherit = MNG
	}

}


country_event = { #Wuu event for MIN integration approach
	id = kielak_events.6
	title = kielak_events.6.t
	picture = DIPLOMACY_eventPicture
	desc = kielak_events.6.d

	is_triggered_only = yes

	option = {
		name = kielak_events.6_option_a
		1829 = {
			add_base_production = -4
			add_base_tax = -4
		}
		669 = {
			add_base_production = -4
			add_base_tax = -4
		}

		2150 = {
			add_base_manpower = 4
		}
		1824 = {
			add_base_manpower = 4
		}
	}

	option = {
		name = kielak_events.6_option_b
		1829 = {
			add_base_production = -4
			add_base_tax = -4
			add_building = fort_15th
			add_core = WUU
		}

	}

	option = {
		name = kielak_events.6_option_c
		fujian_area  = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}

	}

}

country_event = { #Wuu Grand Canal Keeper Event
	id = kielak_events.7
	title = kielak_events.7.t
	picture = CULTURE_eventPicture
	desc = kielak_events.7.d

	is_triggered_only = yes

	option = {
		name = kielak_events.7.a
		add_adm_power = 200
		south_jiangsu_area = {
			cede_province = SZH
			add_core = SZH
			set_local_autonomy = 0
		}

		create_subject = {
			subject_type = kielak_grand_canal_keeper
			subject = SZH
		}

		SZH = {
			add_tariff_value = 0.65
			add_liberty_desire = -50
		}
		custom_tooltip = "The Grand Canal Keeper is a special un-annexable subject that will pay us in Tariffs, administer the Grand Canals for us and upgrade them every 40 years. After 80 years the Great Canal Keeper will be inherited by us."
	}

	option = {
		name = kielak_events.7.b
		1821 = {
			add_base_production = -3
			add_base_tax = -3
			add_base_manpower = -3
			add_great_project_tier = {
				type = grand_canal_4
				tier = -1
			}
		}
		1822 = {
			add_base_production = -3
			add_base_tax = -3
			add_base_manpower = -3
			add_great_project_tier = {
				type = grand_canal_2
				tier = -1
			}
		}
		2145 = {
			add_base_production = -3
			add_base_tax = -3
			add_base_manpower = -3
			add_great_project_tier = {
				type = grand_canal_3
				tier = -1
			}
		}
		684 = {
			add_great_project_tier = {
				type = grand_canal_1
				tier = 2
			}
		}
	}

	option = {
		name = kielak_events.7.c
		add_prestige = 20
		1822 = {
			center_of_trade = 1
		}
	}

}

country_event = { #Wuu Grand Canal Keeper 1st Canal Upgrade event 1
	id = kielak_events.8
	title = kielak_events.8.t
	picture = CULTURE_eventPicture
	desc = kielak_events.8.d

	fire_only_once = yes

	trigger = {
		is_year = 1484
		tag = SZH
		SZH = {
			AND = {
				owns = 1821
				owns = 2145
				owns = 1822
			}
			is_subject_of = WUU
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		1821 = {
			add_great_project_tier = {
				type = grand_canal_4
				tier = 1
			}
		}
		1822 = {
			add_great_project_tier = {
				type = grand_canal_2
				tier = 1
			}
		}
		2145 = {
			add_great_project_tier = {
				type = grand_canal_3
				tier = 1
			}
		}

		WUU = {
			country_event = {
				id = kielak_events.10
			}
		}
		
	}

}

country_event = { #Wuu Grand Canal Keeper 1st Canal Upgrade event 2
	id = kielak_events.9
	title = kielak_events.9.t
	picture = CULTURE_eventPicture
	desc = kielak_events.9.d

	fire_only_once = yes

	trigger = {
		tag = SZH
		is_year = 1524
		SZH = {
			AND = {
				owns = 1821
				owns = 2145
				owns = 1822
			}
		is_subject_of = WUU	
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		1821 = {
			add_great_project_tier = {
				type = grand_canal_4
				tier = 1
			}
		}
		1822 = {
			add_great_project_tier = {
				type = grand_canal_2
				tier = 1
			}
		}
		2145 = {
			add_great_project_tier = {
				type = grand_canal_3
				tier = 1
			}
		}

		WUU = {
			country_event = {

				id = kielak_events.11
			}
		}
		
	}

}

country_event = { #Wuu Grand Canal Keeper Upgrade Notification Event 1
	id = kielak_events.10
	title = kielak_events.10.t
	picture = CULTURE_eventPicture
	desc = kielak_events.10.d

	is_triggered_only = yes

	option = {
		name = kielak_events.10_option_a
		add_prestige = 25
	}

}

country_event = { #Wuu Grand Canal Keeper Upgrade Notification Event 1
	id = kielak_events.11
	title = kielak_events.11.t
	picture = CULTURE_eventPicture
	desc = kielak_events.11.d

	is_triggered_only = yes

	option = {
		name = kielak_events.11_option_a
		inherit = SZH
	}

}


country_event = { #Colonial Nations generate strong ruler
	id = kielak_events.12
	title = kielak_events.12.t
	picture = CATHOLIC_RULERS_PRAYING_eventPicture
	desc = kielak_events.12.d

	is_triggered_only = yes

	option = {
		name = kielak_events.12_option_a
		set_country_flag = took_john
		define_ruler = {
			name = "John J. Johnson"
			dynasty = ROOT
			culture = ROOT
			religion = ROOT
			adm = 6
			dip = 3
			mil = 3
			claim = 100
			age = 30

		}
		hidden_effect = {
			add_ruler_personality = architectural_visionary_personality
		}
		
		
	}

	option = {
		name = kielak_events.12_option_b
		set_country_flag = took_william
		define_ruler = {
			name = "William W. Willson"
			dynasty = ROOT
			culture = ROOT
			religion = ROOT
			adm = 3
			dip = 6
			mil = 3
			claim = 100
			age = 30
		}
		hidden_effect = {
			add_ruler_personality = industrious_personality
		}
		
		
	}

	option = {
		name = kielak_events.12_option_c
		set_country_flag = took_fred
		define_ruler = {
			name = "Fred F. Fredrickson"
			dynasty = ROOT
			culture = ROOT
			religion = ROOT
			adm = 3
			dip = 3
			mil = 6
			claim = 100
			age = 30
		}
		hidden_effect = {
			add_ruler_personality = cruel_personality
		}
		
	}

}


country_event = { #Colonial Nations Fred hates John
	id = kielak_events.13
	title = kielak_events.13.t
	picture = PANIC_eventPicture
	desc = kielak_events.13.d

	trigger = {
		has_country_flag = took_john
	}

	mean_time_to_happen = {
		years = 5
	}

	immediate = {
		clr_country_flag = took_john
	}

	option = {
		name = kielak_events.13_option_a
		capital_scope = {
			spawn_rebels = {
				size = 2
				type = leadered_peasant_rebels
				leader = "Fred F. Fredrickson"
			}
		}	

	}

}

country_event = { #Colonial Nations Fred hates William
	id = kielak_events.14
	title = kielak_events.14.t
	picture = PANIC_eventPicture
	desc = kielak_events.14.d

	trigger = {
		has_country_flag = took_william
	}

	mean_time_to_happen = {
		years = 5
	}

	immediate = {
		clr_country_flag = took_william
	}

	option = {
		name = kielak_events.14_option_a
		capital_scope = {
			spawn_rebels = {
				size = 2
				type = leadered_peasant_rebels
				leader = "Fred F. Fredrickson"
			}
		}	

	}

}

country_event = { #Colonial Nations John and William hate Fred
	id = kielak_events.15
	title = kielak_events.15.t
	picture = PANIC_eventPicture
	desc = kielak_events.15.d

	trigger = {
		has_country_flag = took_fred
	}

	mean_time_to_happen = {
		years = 5
	}

	immediate = {
		clr_country_flag = took_fred
		set_country_flag = revolts_of_john_and_william
	}

	option = {
		name = kielak_events.15_option_a
		capital_scope = {
			spawn_rebels = {
				size = 2
				type = leadered_peasant_rebels
				leader = "John J. Johnson"
			}
		}
		random_owned_province = {
			spawn_rebels = {
				size = 2
				type = leadered_peasant_rebels
				leader = "William W. Willson"
			}
		}	

	}

}

country_event = { #Colonial Nations John and William back for more
	id = kielak_events.16
	title = kielak_events.16.t
	picture = PANIC_eventPicture
	desc = kielak_events.16.d

	trigger = {
		has_country_flag = revolts_of_john_and_william
	}

	mean_time_to_happen = {
		years = 5
	}

	immediate = {
		clr_country_flag = revolts_of_john_and_william
		set_country_flag = last_resort_of_john_and_william
	}

	option = {
		add_stability = -1
		name = kielak_events.16_option_a
		capital_scope = {
			spawn_rebels = {
				size = 3
				type = leadered_peasant_rebels
				leader = "John J. Johnson"
			}
		}
		random_owned_province = {
			spawn_rebels = {
				size = 1
				type = leadered_peasant_rebels
				leader = "William W. Willson"
			}
		}	

	}

}

country_event = { #Colonial Nations John and William last resort
	id = kielak_events.17
	title = kielak_events.17.t
	picture = PANIC_eventPicture
	desc = kielak_events.17.d

	trigger = {		
		has_country_flag = last_resort_of_john_and_william
	}

	mean_time_to_happen = {
		years = 5
	}

	immediate = {
		clr_country_flag = last_resort_of_john_and_william
	}

	option = {
		name = kielak_events.17_option_a
		add_stability = -1
		kill_ruler = yes
		add_country_modifier = {
			name = kielak_colonial_fred_assasinate
			duration = 3650
		}	
	}

}


country_event = { #Colonial Formables Infantry or Cavalry Nation choice
	id = kielak_events.18
	title = kielak_events.18.t
	picture = BIG_BOOK_eventPicture
	desc = kielak_events.18.d

	is_triggered_only = yes

	option = {
		name = kielak_events.18_option_a
		hidden_effect = {
			set_country_flag = colonial_infantry_path
		}
		
	}

	option = {
		name = kielak_events.18_option_b
		hidden_effect = {
			set_country_flag = colonial_cavalry_path
		}
		
	}

}

country_event = { #Colonial Formables Cavalry offensive or defensive
	id = kielak_events.19
	title = kielak_events.19.t
	picture = PRAYING_eventPicture
	desc = kielak_events.19.d

	is_triggered_only = yes

	option = {
		name = kielak_events.19_option_a
		hidden_effect = {
			set_country_flag = colonial_cavalry_offensive_path
		}
		
	}

	option = {
		name = kielak_events.19_option_b
		hidden_effect = {
			set_country_flag = colonial_cavalry_defensive_path
		}
		
	}

}


country_event = { #Colonial Formables respawn wiped elite cavalry
	id = kielak_events.20
	title = kielak_events.20.t
	picture = TEMPORAL_RIFT_eventPicture
	desc = kielak_events.20.d

	trigger = {
		AND = {
			NOT = {
				num_of_special_units = {
					special_unit_category = revolutionary_guard
					type = cavalry
					value = 1
				}
			}
			
			had_country_flag = {
				flag = spawned_elite_cavalry
				days = 9125
			}

			capital_scope = {
				controlled_by = ROOT
				has_siege = no
			}
		}
		
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_country_flag = spawned_elite_cavalry
	}

	option = {
		name = kielak_events.20_option_a
		create_unit_forcelimit_percentage = {
				type = cavalry
				special_unit_category = revolutionary_guard
				force_limit_percentage = 0.1
			}
		hidden_effect = {
			set_country_flag = spawned_elite_cavalry
		}
			
		
	}



}


country_event = { #Colonial Formables Infantry offensive or defensive
	id = kielak_events.21
	title = kielak_events.21.t
	picture = REVOLT_HUGUENOTS_eventPicture
	desc = kielak_events.21.d

	is_triggered_only = yes

	option = {
		name = kielak_events.21_option_a
		hidden_effect = {
			set_country_flag = colonial_infantry_offensive_path
		}
		
	}

	option = {
		name = kielak_events.21_option_b
		hidden_effect = {
			set_country_flag = colonial_infantry_defensive_path
		}
		
	}

}

country_event = { #Colonial Formables respawn wiped elite cavalry
	id = kielak_events.22
	title = kielak_events.22.t
	picture = TEMPORAL_RIFT_eventPicture
	desc = kielak_events.22.d

	trigger = {
		AND = {
			NOT = {
				num_of_special_units = {
					special_unit_category = revolutionary_guard
					type = infantry
					value = 1
				}
			}
			
			had_country_flag = {
				flag = spawned_elite_infantry
				days = 9125
			}

			capital_scope = {
				controlled_by = ROOT
				has_siege = no
			}
		}
		
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_country_flag = spawned_elite_infantry
	}

	option = {
		name = kielak_events.22_option_a
		create_unit_forcelimit_percentage = {
				type = infantry
				special_unit_category = revolutionary_guard
				force_limit_percentage = 0.1
			}
		hidden_effect = {
			set_country_flag = spawned_elite_infantry
		}
			
		
	}



}