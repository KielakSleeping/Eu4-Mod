namespace = kielak_events

country_event = {
	id = kielak_events.1
	title = kielak_events.1.t
	picture = HRE_eventPicture
	desc = kielak_events.1.d

	trigger = {
		AND = {
			tag = HAB
			HAB  = {
				is_emperor = yes
				NOT = {is_year = 1470 }
				NOT = {
					has_country_modifier = emperor_dec_elector
				}
				OR = {
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = BRA
						}
						BRA = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = ROT
						}
						ROT = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = VEN
						}
						VEN = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = MLO
						}
						MLO = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = HES
						}
						HES = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = HSA
						}
						HSA = {ai = no}
					}
					AND = {
						is_in_war = {
						attacker_leader = THIS
						defender_leader = SIC
						}
						SIC = {ai = no}
					}
				}
				
			}
		}

	}
	mean_time_to_happen = {
		months = 4
	}

	option = {
		name = kielak_events.1.a
		add_country_modifier = {
			name = emperor_dec_elector
			duration = 3600
		}
	}

}

country_event = { #Ethiopia Jewish Path Event at game start
	id = kielak_events.2
	title = kielak_events.2.t
	picture = RELIGION_eventPicture
	desc = kielak_events.2.d

	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = kielak_events.2.a
		change_religion = jewish
		every_owned_province = {
			change_religion = jewish
		}
	}

	option = {
		name = kielak_events.2.b
	}

}

country_event = { #Ethiopia form Israel instead of Aksum if Jewish
	id = kielak_events.3
	title = kielak_events.3.t
	picture = RELIGION_eventPicture
	desc = kielak_events.3.d

	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = kielak_events.3.a
		change_tag = ISR
		on_change_tag_effect = yes
		remove_non_electors_emperors_from_empire_effect = yes
		set_capital = 379
		add_prestige = 25
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = ISR_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		set_country_flag = formed_israel_flag
	}

}

country_event = { #China Slots choose harmonized religion
	id = kielak_events.4
	title = kielak_events.4.t
	picture = RELIGION_eventPicture
	desc = kielak_events.4.d

	is_triggered_only = yes

	option = {
		name = kielak_events.4.a
		trigger = {
			NOT = { has_harmonized_with = shinto }
		}
		add_harmonized_religion = shinto
	}


	option = {
		name = kielak_events.4.b
		trigger = {
			NOT = { has_harmonized_with = pagan }
		}
		add_harmonized_religion = animism
	}

	option = {
		name = kielak_events.4.c
		trigger = {
			NOT = { has_harmonized_with = muslim }
		}
		add_harmonized_religion = sunni
	}
	option = {
		name = kielak_events.4.dd
		trigger = {
			NOT = { has_harmonized_with = dharmic }
		}
		add_harmonized_religion = hinduism
	}

	option = {
		name = kielak_events.4.e
		trigger = {
			NOT = { has_harmonized_with = christian }
		}
		add_harmonized_religion = catholic
	}
	option = {
		name = kielak_events.4.f
		trigger = {
			NOT = { has_harmonized_with = mahayana }
		}
		add_harmonized_religion = mahayana
	}
	option = {
		name = kielak_events.4.g
		trigger = {
			NOT = { has_harmonized_with = buddhism }
		}
		add_harmonized_religion = buddhism
	}
	option = {
		name = kielak_events.4.h
		trigger = {
			NOT = { has_harmonized_with = vajrayana }
		}
		add_harmonized_religion = vajrayana
	}
	option = {
		name = kielak_events.4.i
		trigger = {
			NOT = { has_harmonized_with = zoroastrian_group }
		}
		add_harmonized_religion = zoroastrian
	}

	option = {
		name = kielak_events.4.j
		trigger = {
			NOT = { has_harmonized_with = jewish_group }
		}
		add_harmonized_religion = jewish
	}


	option = {
		name = kielak_events.4.k
		add_prestige = 1
	}
	

}


country_event = { #Ming annex day 1 to destroy mandate event
	id = kielak_events.5
	title = kielak_events.5.t
	picture = RELIGION_eventPicture
	desc = kielak_events.5.d

	is_triggered_only = yes

	option = {
		inherit = MNG
	}

}


country_event = { #Wuu event for MIN integration approach
	id = kielak_events.6
	title = kielak_events.6.t
	picture = DIPLOMACY_eventPicture
	desc = kielak_events.6.d

	is_triggered_only = yes

	option = {
		
		1829 = {
			add_base_production = -4
			add_base_tax = -4
		}
		669 = {
			add_base_production = -4
			add_base_tax = -4
		}

		2150 = {
			add_base_manpower = 4
		}
		1824 = {
			add_base_manpower = 4
		}
	}

	option = {

		1829 = {
			add_base_production = -4
			add_base_tax = -4
			add_building = fort_15th
			add_core = WUU
		}

	}

	option = {
		fujian_area  = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}

	}

}

country_event = { #Wuu Grand Canal Keeper Event
	id = kielak_events.7
	title = kielak_events.7.t
	picture = CULTURE_eventPicture
	desc = kielak_events.7.d

	is_triggered_only = yes

	option = {
		name = kielak_events.7.a
		add_adm_power = 200
		south_jiangsu_area = {
			cede_province = SZH
			add_core = SZH
			set_local_autonomy = 0
		}

		create_subject = {
			subject_type = kielak_grand_canal_keeper
			subject = SZH
		}

		SZH = {
			add_tariff_value = 0.65
			add_liberty_desire = -50
		}
		custom_tooltip = "The Grand Canal Keeper is a special un-annexable subject that will pay us in Tariffs, administer the Grand Canals for us and upgrade them every 40 years. After 80 years the Great Canal Keeper will be inherited by us."
	}

	option = {
		name = kielak_events.7.b
		1821 = {
			add_base_production = -3
			add_base_tax = -3
			add_base_manpower = -3
			add_great_project_tier = {
				type = grand_canal_4
				tier = -1
			}
		}
		1822 = {
			add_base_production = -3
			add_base_tax = -3
			add_base_manpower = -3
			add_great_project_tier = {
				type = grand_canal_2
				tier = -1
			}
		}
		2145 = {
			add_base_production = -3
			add_base_tax = -3
			add_base_manpower = -3
			add_great_project_tier = {
				type = grand_canal_3
				tier = -1
			}
		}
		684 = {
			add_great_project_tier = {
				type = grand_canal_1
				tier = 2
			}
		}
	}

	option = {
		name = kielak_events.7.c
		add_prestige = 20
		1822 = {
			center_of_trade = 1
		}
	}

}

country_event = { #Wuu Grand Canal Keeper 1st Canal Upgrade event 1
	id = kielak_events.8
	title = kielak_events.8.t
	picture = CULTURE_eventPicture
	desc = kielak_events.8.d

	fire_only_once = yes

	trigger = {
		is_year = 1484
		SZH = {
			AND = {
				owns = 1821
				owns = 2145
				owns = 1822
			}
			is_subject_of = WUU
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		1821 = {
			add_great_project_tier = {
				type = grand_canal_4
				tier = 1
			}
		}
		1822 = {
			add_great_project_tier = {
				type = grand_canal_2
				tier = 1
			}
		}
		2145 = {
			add_great_project_tier = {
				type = grand_canal_3
				tier = 1
			}
		}

		WUU = {
			country_event = {
				id = kielak_events.10
			}
		}
		
	}

}

country_event = { #Wuu Grand Canal Keeper 1st Canal Upgrade event 2
	id = kielak_events.9
	title = kielak_events.9.t
	picture = CULTURE_eventPicture
	desc = kielak_events.9.d

	fire_only_once = yes

	trigger = {
		is_year = 1524
		SZH = {
			AND = {
				owns = 1821
				owns = 2145
				owns = 1822
			}
		is_subject_of = WUU	
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		1821 = {
			add_great_project_tier = {
				type = grand_canal_4
				tier = 1
			}
		}
		1822 = {
			add_great_project_tier = {
				type = grand_canal_2
				tier = 1
			}
		}
		2145 = {
			add_great_project_tier = {
				type = grand_canal_3
				tier = 1
			}
		}

		WUU = {
			country_event = {

				id = kielak_events.11
			}
		}
		
	}

}

country_event = { #Wuu Grand Canal Keeper Upgrade Notification Event 1
	id = kielak_events.10
	title = kielak_events.10.t
	picture = CULTURE_eventPicture
	desc = kielak_events.10.d

	is_triggered_only = yes

	option = {
		add_prestige = 25
	}

}

country_event = { #Wuu Grand Canal Keeper Upgrade Notification Event 1
	id = kielak_events.11
	title = kielak_events.11.t
	picture = CULTURE_eventPicture
	desc = kielak_events.11.d

	is_triggered_only = yes

	option = {
		inherit = SZH
	}

}